# 우리그때 앱 PRD v1 (한국어)

날짜: 2026-02-20  
상태: 초안  
플랫폼: React Native(iOS/Android), 소규모 비공개 친구 그룹
서비스명: 우리그때  
프로젝트 코드명: ourthen

## 1. 제품 요약

친구들이 평소 소식을 계속 올리고, 약속 때 그 소식 조각을 연결해 회고할 수 있는 앱이다.

앱이 기록하는 핵심:

- 누가 약속에 참석했는지
- 어떤 소식이 약속에서 언급됐는지
- 어떤 소식 조각에 어떤 댓글이 붙었는지

게이미피케이션은 퍼즐 중심으로 설계한다.

- `약속 1개 = 퍼즐 1개`
- 소식 조각 1개만 연결되어도 퍼즐은 완성
- 추가 조각이 쌓일수록 퍼즐 비주얼이 진화

핵심 목적은 경쟁이 아니라, 친구들의 기억을 함께 복원하는 경험이다.

## 2. 문제와 타깃

### 문제

명절이나 공백 기간 이후에는 친구들의 근황이 시간순으로 정리되지 않고 조각나서 기억된다.  
메신저는 대화 로그는 남지만, 약속 중심으로 "그 사이 무슨 일이 있었는지" 복기하기 어렵다.

### 타깃 사용자

- 5~20명 규모의 친한 친구 그룹
- 공개 SNS보다 비공개 공유를 선호하는 사용자
- 긴 글보다 짧은 기록/탭 입력을 선호하는 사용자

## 3. 제품 원칙

1. 입력 부담 최소화: 긴 작성보다 탭 기반 상호작용 우선
2. 기본 비공개: 모든 데이터는 그룹 내부 공개만 허용
3. 협동 중심: MVP에서 개인 랭킹은 제공하지 않음
4. 기여 보상: 조각 연결이 많아질수록 퍼즐 시각 보상 강화
5. 랜덤+일관성: 테마는 랜덤이되 시드 기반으로 결과 일관성 보장

## 4. 핵심 도메인 모델

- Circle: 비공개 친구 그룹
- FeedItem: 시간순으로 쌓이는 소식
- Piece: FeedItem 업로드 시 자동 생성되는 퍼즐 조각(1:1)
- Meetup: 약속 (`planned`, `completed`, `canceled`)
- Mention: 조각과 약속의 연결 상태 (`mentioned`만 사용)
- PieceComment: 조각 단위 댓글(추가 맥락 기록)
- Attendance: 약속 참석 상태

## 5. MVP 기능 범위

### 5.1 그룹과 약속

- 그룹 멤버 누구나 약속 생성 가능
- 연결 조각이 0개여도 약속 완료 가능
- 참석 체크는 본인/주최자 모두 가능

충돌 정책:

- 본인 체크 우선
- 변경 이력(누가, 언제, 무엇을 바꿨는지) 저장

### 5.2 소식과 조각

- 소식은 구간 분리 없이 연속 누적
- 업로드 즉시 조각 자동 생성
- 조각 생성 최소 조건 없음
- 사용자별 조각 기여 상한 없음

### 5.3 약속에서 조각 연결

- 참석자 전원 `mentioned` 체크 가능
- 체크한 사용자 이름 공개
- 체크 가능 기간 제한 없음
- 동일 사용자-동일 조각-동일 약속 조합에서 상태는 `mentioned` 1개만 유지
- 덧붙일 내용은 조각 댓글로 기록

### 5.4 공개 범위

- 소식, 퍼즐, 약속 데이터는 해당 그룹 멤버에게만 공개
- 외부 링크 공개/전체 공개 없음

## 6. MVP 유저 플로우

### 6.1 온보딩/그룹 참여

1. 사용자 회원가입(소셜 로그인)
2. 초대 링크 또는 코드로 Circle 입장
3. Circle 홈에서 최근 소식/다가오는 약속 확인

### 6.2 소식 업로드 -> 조각 생성

1. 사용자가 텍스트/사진/링크 소식 업로드
2. 업로드 즉시 Piece 자동 생성(1:1)
3. 피드에 소식과 조각 반영

### 6.3 약속 생성/준비

1. 그룹 멤버 누구나 약속 생성
2. 약속 상세 화면에서 기존 조각 리스트 확인
3. 약속 전에 말하고 싶은 조각에 미리 댓글 작성 가능

### 6.4 약속 중 체크

1. 약속 참석자 체크(본인 또는 주최자)
2. 약속에서 실제로 나온 조각에 `mentioned` 체크
3. 추가 맥락은 해당 조각 댓글로 기록

### 6.5 약속 완료/회고

1. 주최자 또는 권한 사용자 `completed` 처리
2. 연결 조각 0개여도 완료 가능
3. 완료 후 퍼즐 상태/진화 단계 즉시 반영
4. 회고 화면에서 참석자 + 언급 조각 + 댓글 타임라인 확인

### 6.6 삭제/정정

1. 소식 삭제 시 해당 Piece 무효화/삭제
2. 연결 점수 즉시 차감
3. 퍼즐 단계 즉시 재계산

## 7. 퍼즐 게이미피케이션 설계

### 7.1 완성/진화 규칙

- 약속 1개당 퍼즐 1개 생성
- 연결된 조각 1개 이상이면 퍼즐 완성
- 조각 점수가 쌓일수록 진화 단계 상승

권장 단계 임계치(가중 점수 기준):

- 1단계: 1점
- 2단계: 3점
- 3단계: 5점
- 4단계: 8점

### 7.2 다양성형 가중치

점수 계산:

- 기본: 조각 연결 1개당 1점
- 다양성 보너스: 해당 약속에 처음 등장한 타입이면 +0.5
- MVP 타입 기준: `text`, `photo`, `link`

보정 원칙:

- 같은 타입 반복은 다양성 보너스 없음
- 중복/유사 도배 콘텐츠는 퍼즐 기여도 하향 가능

### 7.3 테마 랜덤 정책

- 약속 생성 시 퍼즐 테마 랜덤 선택
- 시드: `circleId + meetupId`
- 같은 그룹 내 최근 3개 약속에서 사용한 테마는 제외 후 추첨

### 7.4 3D 연출 정책 (MVP)

하이브리드 전략 사용:

- 평시: 2.5D 기반의 경량 레이어 애니메이션
- 퍼즐 완성/진화 순간: 3D 느낌의 강조 연출

성능 원칙:

- transform/opacity 중심 애니메이션
- 피드 영역에서 무거운 실시간 3D 계산은 최소화

## 8. 삭제와 재계산 정책

- 소식 삭제 시 연결 조각 무효화/삭제
- 퍼즐 점수 즉시 차감
- 퍼즐 진화 단계 즉시 재계산

## 9. 운영 정책

### 9.1 프라이버시

- 초대 기반 비공개 그룹
- 그룹 외부 공개 없음
- 행위자 공개는 그룹 내부에 한정

### 9.2 스팸/악용 대응

- 하드 캡 없음
- 반복/유사 업로드는 점수 기여도 조정
- 비정상 연속 업로드는 소프트 탐지/완화

### 9.3 감사 이력

- 참석 변경 이력 저장
- 조각 연결/댓글 변경 이력 저장

## 10. MVP 성공 지표

핵심 지표:

- 주간 활성 그룹 중 3인 이상 활동 그룹 비율
- 약속 완료율
- 완료 약속당 평균 연결 조각 수
- 약속당 평균 퍼즐 진화 단계

품질 지표:

- 참석 체크 완료율
- 연결 조각 1개 이상 보유 약속 비율
- D7/D30 그룹 리텐션

안전 지표:

- 스팸 탐지율
- 운영 대응 지연 시간

## 11. MVP 비목표

- 공개형 SNS/탐색 피드
- 개인 랭킹 경쟁 구조
- 고사양 실시간 3D 엔진 중심 UX
- 구간 자동 마감 기반의 복잡한 타임라인 정책

## 12. 기술 베이스라인 제안

- Mobile: React Native + TypeScript
- List: FlashList 또는 LegendList 계열 가상화 리스트
- Image: `expo-image` 계열 최적화
- Animation: Reanimated 기반 성능 우선 애니메이션
- Backend: Supabase

## 13. 구현 전 추가 확정 항목

1. 유사 콘텐츠 판단 임계치
2. 출시 테마 라이브러리 규모
3. 약속 수정 권한(주최자/관리자 범위)
4. Supabase RLS 권한 정책 상세(그룹/조각/댓글)
